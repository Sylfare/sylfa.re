---
import { render, type CollectionEntry } from "astro:content";

import Section from '@components/Section.astro';
import type { TrucSympa } from 'src/common/content.config';
import { useTranslations } from "../i18n/utils";
const t = useTranslations(Astro.currentLocale);
const mainPath = t(a=>a.navigation?.coolThingsPath);

const { truc, path } = Astro.props;
type Props = {
    truc: CollectionEntry<'trucsympa-en'> | CollectionEntry<'trucsympa-fr'>
}
const { Content } = await render(truc);
const liens = Object.entries(truc.data.liens ?? {});
const tags = truc.data.tags ?? [];
const trucPath = t(a=>a.navigation?.coolThingsDetailPath);
---
<Section title={truc.data.nom} id={truc.id}>
    <div>{ tags.map(tag => <><a href={`${path}/tags/${tag}`}>#{tag}</a> </>) }</div>
    <div>
        { liens.map(([nom, href]) => <><a {href} target="_blank">{nom}</a> </>) }
        <a href={`${mainPath}/${trucPath}/${truc.id}`}>{t(a=>a.pages?.trucscools?.permalink)}</a>
    </div>
    
    <Content />
</Section>