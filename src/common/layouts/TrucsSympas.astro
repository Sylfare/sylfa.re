---
import Section from "@components/Section.astro";
import SousPage from "./SousPage.astro";
import TrucSympa from "./TrucSympa.astro";
import PreviousNext from "@components/PreviousNext.astro";
import { useTranslations } from "../i18n/utils";

const { trucs, tag, tagCount, page} = Astro.props;
const tags = {};
const t = useTranslations(Astro.currentLocale);
const title = tag ? `${t(a=>a.pages?.trucscools?.showTag)} "${tag}"` : t(a=>a.pages?.trucscools?.showAllTags);

---
<SousPage {title}>
    {!tag && <p>{t(a=>a.pages?.trucscools?.funny)}</p>}
    <Section title={t(a=>a.pages?.trucscools?.tagSectionTitle)}>
        <a href="/trucssympas">{t(a=>a.pages?.trucscools?.allTags)}</a>
        {Object.entries(tagCount).sort((a, b) => b[1] - a[1]).map(([tag, amount]) => <><a href={`/trucssympas/tags/${tag}`}>{tag} ({amount})</a> </>)}
    </Section>
    
    {trucs.map(truc => <TrucSympa {truc}></TrucSympa>)}
    <PreviousNext {page}>
</SousPage>